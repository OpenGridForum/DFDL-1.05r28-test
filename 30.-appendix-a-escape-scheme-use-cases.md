# 30. Appendix A: Escape Scheme Use Cases

This appendix gives additional examples of escape schemes and how they affect interpretation of \(parsing\) or creation of \(unparsing\) the data stream.

The tables can be interpreted as the physical data column on the right is parsed to obtain the logical data on the left, or the logical data on the left is unparsed to create the physical representation on the right.

## 30.1 Escape Character Same as dfdl:escapeEscapeCharacter

dfdl:escapeKind 'escapeCharacter', dfdl:escapeCharacter '/', dfdl:escapeEscapeCharacter '/', dfdl:separator ';', dfdl:extraEscapedCharacters '?'

| Logical Data | Physical Data / Representation |
| :--- | :--- |
| **…………….………………..** | **…………….………………..** |
| **……………/.………………..** | **……………//.………………..** |
| **……………/.…/……………..** | **……………//.…//……………..** |
| **……………//.………………..** | **……………////.………………..** |
| **/…………….………………..** | **//…………….………………..** |
| **…………….………………../** | **…………….………………..//** |
| **/……………/.………………..** | **//……………//.………………..** |
| **……………./………………../** | **…………….//………………..//** |
| **…………….;………………..** | **……………./;………………..** |
| **……………./;………………..** | **…………….///;………………..** |
| **;…………….………………..** | **/;…………….………………..** |
| **…………….?………………..** | **……………./?………………..** |

Table 70 Examples of Escape Character Same as dfdl:escapeEscapeCharacter

## 30.2 Escape Character Different from dfdl:escapeEscapeCharacter

### 30.2.1 Example 1 - Separator ';'

dfdl:escapeKind 'escapeCharacter', dfdl:escapeCharacter '/', dfdl:escapeEscapeCharacter '%%’\[47\], dfdl:separator ‘;’

| Logical Data | Physical Data / Representation |
| :--- | :--- |
| **…………….………………..** | **…………….………………..** |
| **……………/.………………..** | **……………%/.………………..** |
| **……………/.…/……………..** | **……………%/.…%/……………..** |
| **……………//.………………..** | **……………%/%/.………………..** |
| **/…………….………………..** | **%/…………….………………..** |
| **…………….………………../** | **…………….………………..%/** |
| **/……………/.………………..** | **%/……………%/.………………..** |
| **……………./………………../** | **…………….%/………………..%/** |
| **…………….;………………..** | **……………./;………………..** |
| **……………./;………………..** | **…………….%//;………………..** |
| **;…………….………………..** | **/;…………….………………..** |
| **…………….?………………..** | **……………./?………………..** |
| **…………….%………………..** | **…………….%………………..** |
| **…………….%/………………..** | **…………….%%/………………..** |
| **……………./%………………..** | **…………….%/%………………..** |

Table 71 Examples \(1\) of Escape Character Different from dfdl:escapeEscapeCharacter

\[47\] The ‘%’ character needs escaping as part of DFDL syntax when used as a literal character in DFDL properties. It is escaped by doubling it, i.e., preceding it by another ‘%’ character. In this example we are defining the dfdl:escapeEscapeCharacter to be a single '%' character in the data stream.

### 30.2.2 Example 2 - Separator 'sep'

Dfdl:escapeKind 'escapeCharacter', dfdl:escapeCharacter '/', dfdl:escapeEscapeCharacter '%%', dfdl:separator 'sep'

| Logical Data | Physical Data / Representation |
| :--- | :--- |
| **…………….sep………………..** | **……………./sep………………..** |
| **……………./sep………………..** | **…………….%//sep………………..** |
| **sep…………….………………..** | **/sep…………….………………..** |

Table 72 Examples \(2\) of Escape Character Different from dfdl:escapeEscapeCharacter

## 30.3 Escape Block with Different Start and End Characters

dfdl:escapeKind 'escapeBlock', dfdl:escapeBlockStart '\[', dfdl:escapeBlockEnd '\]', dfdl:escapeEscapeCharacter '%%', dfdl:separator ';', dfdl:extraEscapedCharacters '?'

| Logical Data | Physical Data / Representation |
| :--- | :--- |
| **…………….………………..** | **…………….………………..** |
| **\[…………….………………..** | **\[\[…………….………………..\]** |
| **\]…………….………………..** | **\]…………….………………..** |
| **……………\[.………………..** | **……………\[.………………..** |
| **……………\].………………..** | **……………\].………………..** |
| **…………….………………..\]** | **…………….………………..\]** |
| **\[\[…………….………………..** | **\[\[\[…………….………………..\]** |
| **…………….………………..\]\]** | **…………….………………..\]\]** |
| **…………….\[\[………………..** | **…………….\[\[………………..** |
| **…………….\]\]………………..** | **…………….\]\]………………..** |
| **\[…………….………………..\]** | **\[\[…………….………………..%\]\]** |
| **\[…………….\]………………..** | **\[\[…………….%\]………………..\]** |
| **…………….\[………………..\]** | **…………….\[………………..\]** |
| **\[……………\[.………………..\]** | **\[\[……………\[.………………..%\]\]** |
| **\[…………….\]………………..\]** | **\[\[…………….%\]………………..%\]\]** |
| **\[\[…………….………………..\]** | **\[\[\[…………….………………..%\]\]** |
| **\[…………….………………..\]\]** | **\[\[…………….………………..%\]%\]\]** |
| **\[\[…………….………………..\]\]** | **\[\[\[…………….………………..%\]%\]\]** |
| **…………….%………………..** | **…………….%………………..** |
| **…………….%%………………..** | **…………….%%………………..** |
| **…………….%\[………………..** | **…………….%\[………………..** |
| **…………….%\]………………..** | **…………….%\]………………..** |
| **%\[…………….………………..** | **%\[…………….………………..** |
| **…………….………………..%\]** | **…………….………………..%\]** |
| **%\[…………….………………..%\]** | **%\[…………….………………..%\]** |
| **\[…………%….………………..\]** | **\[\[…………%….………………..%\]\]** |
| **\[…………%\]….………………..\]** | **\[\[…………%%\]….………………..%\]\]** |
| **…………….;………………..** | **\[…………….;………………..\]** |
| **…………….%;………………..** | **\[…………….%;………………..\]** |
| **\[…………….;………………..\]** | **\[\[…………….;………………..%\]\]** |
| **…………….?………………..** | **\[…………….?………………..\]** |

Table 73 Examples of Escape Block with Different Start and End Characters

## 30.4 Escape Block with Same Start and End Characters

dfdl:escapeKind 'escapeBlock', dfdl:escapeBlockStart ' &apos;', dfdl:escapeBlockEnd '&apos;', dfdl:escapeEscapeCharacter '%', dfdl:separator ';', dfdl:extraEscapedCharacters '?'

| Logical Data | Physical Data / Representation |
| :--- | :--- |
| **…………….………………..** | **…………….………………..** |
| **'…………….………………..** | **'%'…………….………………..'** |
| **……………'.………………..** | **……………'.………………..** |
| **…………….………………..'** | **…………….………………..'** |
| **''…………….………………..** | **'%'%'…………….………………..'** |
| **…………….………………..''** | **…………….………………..''** |
| **…………….''………………..** | **…………….''………………..** |
| **'…………….………………..'** | **'%'…………….………………..%''** |
| **'…………….'………………..** | **'%'…………….%'………………..'** |
| **…………….'………………..'** | **…………….'………………..'** |
| **'……………'.………………..'** | **'%'……………%'.………………..%''** |
| **''…………….………………..'** | **'%'%'…………….………………..%''** |
| **'…………….………………..''** | **'%'…………….………………..%'%''** |
| **''…………….………………..''** | **'%'%'…………….………………..%'%''** |
| **…………….%………………..** | **…………….%………………..** |
| **…………….%%………………..** | **…………….%%………………..** |
| **…………….%'………………..** | **…………….%'………………..** |
| **%'…………….………………..** | **%'…………….………………..** |
| **…………….………………..%'** | **…………….………………..%'** |
| **'…………….………………..%'** | **'%'…………….………………..%%''** |
| **%'…………….………………..%'** | **%'…………….………………..%'** |
| **'…………%….………………..'** | **'%'…………%….………………..%''** |
| **'…………%'….………………..'** | **'%'…………%%'….………………..%''** |
| **…………….;………………..** | **'…………….;………………..'** |
| **…………….%;………………..** | **'…………….%;………………..'** |
| **'…………….;………………..'** | **'%'…………….;………………..%''** |
| **…………….?………………..** | **'…………….?………………..'** |

Table 74 Examples of Escape Block with Same Start and End Characters

